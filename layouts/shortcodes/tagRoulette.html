<!--
    æ ‡ç­¾è½®ç›˜: ç‚¹å‡»æ¸¸æˆæ‰‹æŸ„emojiï¼ˆğŸ•¹ï¸ï¼‰è§¦å‘æ»šåŠ¨æ•ˆæœ,ä»é¢„å®šä¹‰çš„æ ‡ç­¾æ•°ç»„ä¸­éšæœºé€‰æ‹©æ ‡ç­¾æ˜¾ç¤º
    å¡ç‰‡æŠ„è‡ªï¼š5imeä½œè€…çš„åšå®¢ https://5ime.cn/hello-2024.html#%E5%85%B3%E4%BA%8E%E6%88%91
        è‡´è°¢ï¼ï¼ï¼
-->

{{- $inputTags := .Get "tags" | default "ç‚¹å‡»æŒ‰é’®æŠ½å–æ ‡ç­¾,æ ‡ç­¾è½®ç›˜,å¸¦æœ‰æ¨¡ç³Šæ•ˆæœ,å¥½æƒ³ç¡è§‰" -}}
{{- $icon := .Get "icon" | default "ğŸ•¹ï¸" -}}

<div class="roll">
    <div class="roll-button" onclick="rollTagRoulette()">{{ $icon }}</div>
    <div class="roll-tags"><span class="ready removing"></span></div>
</div>

<script>
var rollTagRoulette = () => {
    // å½“ä½ çœ‹åˆ°è¿™è¡Œå­—ï¼Œä½ çŸ¥é“æˆ‘è¦è¯´ä»€ä¹ˆå§ã€‚
    var tags = {{ $inputTags }}.split(",");
    var tag = document.querySelector('.roll-tags');
    tag.innerHTML = '';

    var interval = setInterval(function () {
        var span = document.createElement('span');
        span.classList.add('ready');
        span.classList.add('blur');
        span.innerText = tags[Math.floor(Math.random() * tags.length)];
        tag.appendChild(span);
        spans = tag.querySelectorAll('span');
        for (var i = 0; i < spans.length; i++) {
            spans[i].classList.add('removing');
        }
    }, 200);
    
    setTimeout(function () {
        clearInterval(interval);
        for (var i = 0; i < spans.length-1; i++) {
            tag.removeChild(spans[i]);
        }
        setTimeout(function () {
            spans[spans.length-1].classList.remove('blur');
        }, 100);
    }, 1000);
}

rollTagRoulette(); // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è§¦å‘ä¸€æ¬¡æ»šåŠ¨
</script>

<style>
.roll .roll-button {
    text-align: center;
    font-size: 30px;
    user-select: none;
    width: 40px;
    margin: 10px auto;
    transition: transform 0.2s ease;
    cursor: var(--cursor-pointer);
}

.roll .roll-button:hover {
    transform: scale(1.1);
}

.roll-tags {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    height: 60px;
    position: relative;
}

.roll-tags span {
    position: absolute;
    color: var(--red-1);
    padding: 10px 20px;
    border-radius: 10px;
    background-color: var(--red-5);
    transition: filter 0.3s ease, opacity 0.3s ease;
}

.roll-tags span.blur {
    filter: blur(2px);
    opacity: 0.7;
}

.roll-tags span.removing {
    animation: tag-removing 0.1s ease-in-out;
}

@keyframes tag-removing {
    0% {
        transform: translateY(0px);
        opacity: 1;
    }
    100% {
        opacity: 0;
        transform: translateY(6px);
    }
}
</style>